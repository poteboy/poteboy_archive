{"componentChunkName":"component---src-components-post-tsx","path":"/blog/gatsby-seo","result":{"data":{"contentfulTech":{"title":"【Gatsby】検索エンジン最適化(SEO)対策\b方法","publishedDate":"May 2nd, 2021","description":"Gatsby製のサイトのメタタグのページ毎の設定方法やサイトマップ設置方法の解説","body":{"childMarkdownRemark":{"html":"<h2>GatsbyでSEO対策</h2>\n<p>検索エンジンに評価されるためには、metaタグを設置したり、サイトマップを作成する事が重要である。<code class=\"language-text\">gatsby-plugin-sitemap</code>や<code class=\"language-text\">gatsby-plugin-react-helmet</code>などのプラグインを用いればGatsbyで簡単にSEO対策する事ができる。</p>\n<p>自分のサイトがどの程度SEO対策できているかは、<a href=\"https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=ja\">Lighthouse</a>というChrome拡張機能を使って調べる事ができる。</p>\n<p>ちなみに、私のサイトの場合は以下のようになっている。</p>\n<p><a\n          class=\"gatsby-resp-image-link\"\n          href=\"https://images.ctfassets.net/k8nc29mdlquq/5yn0xTnHMZlQXVQF8TIuug/bc1dbd0499a48d59aa9e48318139d8e1/2021-05-17_3.15__________________.JPG\"\n          style=\"display: block\"\n          target=\"_blank\"\n          rel=\"noopener\"\n        >\n          <span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 33.37662337662338%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4gfoSUNDX1BST0ZJTEUAAQEAAAfYYXBwbAIgAABtbnRyUkdCIFhZWiAH2QACABkACwAaAAthY3NwQVBQTAAAAABhcHBsAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtkZXNjAAABCAAAAG9kc2NtAAABeAAABZxjcHJ0AAAHFAAAADh3dHB0AAAHTAAAABRyWFlaAAAHYAAAABRnWFlaAAAHdAAAABRiWFlaAAAHiAAAABRyVFJDAAAHnAAAAA5jaGFkAAAHrAAAACxiVFJDAAAHnAAAAA5nVFJDAAAHnAAAAA5kZXNjAAAAAAAAABRHZW5lcmljIFJHQiBQcm9maWxlAAAAAAAAAAAAAAAUR2VuZXJpYyBSR0IgUHJvZmlsZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbWx1YwAAAAAAAAAfAAAADHNrU0sAAAAoAAABhGRhREsAAAAuAAABrGNhRVMAAAAkAAAB2nZpVk4AAAAkAAAB/nB0QlIAAAAmAAACInVrVUEAAAAqAAACSGZyRlUAAAAoAAACcmh1SFUAAAAoAAACmnpoVFcAAAAWAAACwm5iTk8AAAAmAAAC2GNzQ1oAAAAiAAAC/mhlSUwAAAAeAAADIGl0SVQAAAAoAAADPnJvUk8AAAAkAAADZmRlREUAAAAsAAADimtvS1IAAAAWAAADtnN2U0UAAAAmAAAC2HpoQ04AAAAWAAADzGphSlAAAAAaAAAD4mVsR1IAAAAiAAAD/HB0UE8AAAAmAAAEHm5sTkwAAAAoAAAERGVzRVMAAAAmAAAEHnRoVEgAAAAkAAAEbHRyVFIAAAAiAAAEkGZpRkkAAAAoAAAEsmhySFIAAAAoAAAE2nBsUEwAAAAsAAAFAnJ1UlUAAAAiAAAFLmFyRUcAAAAmAAAFUGVuVVMAAAAmAAAFdgBWAWEAZQBvAGIAZQBjAG4A/QAgAFIARwBCACAAcAByAG8AZgBpAGwARwBlAG4AZQByAGUAbAAgAFIARwBCAC0AYgBlAHMAawByAGkAdgBlAGwAcwBlAFAAZQByAGYAaQBsACAAUgBHAEIAIABnAGUAbgDoAHIAaQBjAEMepQB1ACAAaADsAG4AaAAgAFIARwBCACAAQwBoAHUAbgBnAFAAZQByAGYAaQBsACAAUgBHAEIAIABHAGUAbgDpAHIAaQBjAG8EFwQwBDMEMAQ7BEwEPQQ4BDkAIAQ/BEAEPgREBDAEOQQ7ACAAUgBHAEIAUAByAG8AZgBpAGwAIABnAOkAbgDpAHIAaQBxAHUAZQAgAFIAVgBCAMEAbAB0AGEAbADhAG4AbwBzACAAUgBHAEIAIABwAHIAbwBmAGkAbJAadSgAIABSAEcAQgAggnJfaWPPj/AARwBlAG4AZQByAGkAcwBrACAAUgBHAEIALQBwAHIAbwBmAGkAbABPAGIAZQBjAG4A/QAgAFIARwBCACAAcAByAG8AZgBpAGwF5AXoBdUF5AXZBdwAIABSAEcAQgAgBdsF3AXcBdkAUAByAG8AZgBpAGwAbwAgAFIARwBCACAAZwBlAG4AZQByAGkAYwBvAFAAcgBvAGYAaQBsACAAUgBHAEIAIABnAGUAbgBlAHIAaQBjAEEAbABsAGcAZQBtAGUAaQBuAGUAcwAgAFIARwBCAC0AUAByAG8AZgBpAGzHfLwYACAAUgBHAEIAINUEuFzTDMd8Zm6QGgAgAFIARwBCACBjz4/wZYdO9k4AgiwAIABSAEcAQgAgMNcw7TDVMKEwpDDrA5MDtQO9A7kDugPMACADwAPBA78DxgOvA7sAIABSAEcAQgBQAGUAcgBmAGkAbAAgAFIARwBCACAAZwBlAG4A6QByAGkAYwBvAEEAbABnAGUAbQBlAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGUAbA5CDhsOIw5EDh8OJQ5MACAAUgBHAEIAIA4XDjEOSA4nDkQOGwBHAGUAbgBlAGwAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGkAWQBsAGUAaQBuAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGkAbABpAEcAZQBuAGUAcgBpAQ0AawBpACAAUgBHAEIAIABwAHIAbwBmAGkAbABVAG4AaQB3AGUAcgBzAGEAbABuAHkAIABwAHIAbwBmAGkAbAAgAFIARwBCBB4EMQRJBDgEOQAgBD8EQAQ+BEQEOAQ7BEwAIABSAEcAQgZFBkQGQQAgBioGOQYxBkoGQQAgAFIARwBCACAGJwZEBjkGJwZFAEcAZQBuAGUAcgBpAGMAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGV0ZXh0AAAAAENvcHlyaWdodCAyMDA3IEFwcGxlIEluYy4sIGFsbCByaWdodHMgcmVzZXJ2ZWQuAFhZWiAAAAAAAADzUgABAAAAARbPWFlaIAAAAAAAAHRNAAA97gAAA9BYWVogAAAAAAAAWnUAAKxzAAAXNFhZWiAAAAAAAAAoGgAAFZ8AALg2Y3VydgAAAAAAAAABAc0AAHNmMzIAAAAAAAEMQgAABd7///MmAAAHkgAA/ZH///ui///9owAAA9wAAMBs/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgADQAoAwEiAAIRAQMRAf/EABkAAAIDAQAAAAAAAAAAAAAAAAIGAAMFCf/EACoQAAEEAQIDCAMBAAAAAAAAAAECAwQRIQAxBRIUBhMiQUJRYXEWMpGx/8QAFgEAAwAAAAAAAAAAAAAAAAAAAQID/8QAHBEAAgICAwAAAAAAAAAAAAAAAAECEQMhE1Fh/9oADAMBAAIRAxEAPwDpf2imzGZzTcUvpTyiy3GWtIVe5IFEbYzscZ0HHuJymeIx+nU+mPSVK5Ibi6ObJIG1FOM7EeE50yd58aB7mcbKUrU0T600SP7jSOJB4VK9vfpmTeLBmehI78NINOBMN1QJ+CE0dUzFz/yCM20tYjrpYpo8gSP2CjsCc1fuNq1pdO9ztnrHqSMppFL+/D/lb6KKy6wpRclOyAdkuBICcnagPfz9h86NWVyR5Ek9V0L8ri8hPbRiM3IPR1yOs9yvBIx6M2fOwANTTEqNHU+HlR2y8DYcKRzA1W/1qaYJ/9k='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Lighthouseの点数\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/k8nc29mdlquq/5yn0xTnHMZlQXVQF8TIuug/bc1dbd0499a48d59aa9e48318139d8e1/2021-05-17_3.15__________________.JPG\"\n        srcset=\"https://images.ctfassets.net/k8nc29mdlquq/5yn0xTnHMZlQXVQF8TIuug/bc1dbd0499a48d59aa9e48318139d8e1/2021-05-17_3.15__________________.JPG?w=193 193w,\nhttps://images.ctfassets.net/k8nc29mdlquq/5yn0xTnHMZlQXVQF8TIuug/bc1dbd0499a48d59aa9e48318139d8e1/2021-05-17_3.15__________________.JPG?w=385 385w,\nhttps://images.ctfassets.net/k8nc29mdlquq/5yn0xTnHMZlQXVQF8TIuug/bc1dbd0499a48d59aa9e48318139d8e1/2021-05-17_3.15__________________.JPG?w=770 770w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span>\n        </a></p>\n<br/>\n<h2>サイトマップを設置</h2>\n<h3>プラグインのインストール</h3>\n<p><code class=\"language-text\">gatsby-plugin-sitemap</code>というプラグインをインストールする</p>\n<div class=\"gatsby-code-title your-custom-class-name\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-plugin-sitemap</code></pre></div>\n<br/>\n<h3>gatsby-config.jsを編集</h3>\n<p>先ほどインストールしたプラグインを有効化するために、gatsby-config.jsファイルを以下のように編集する。</p>\n<p><code class=\"language-text\">siteUrl</code>には、自身のサイトのURLを入力する</p>\n<div class=\"gatsby-code-title your-custom-class-name\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    siteUrl<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">自身のサイトのURL</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-sitemap</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>以上で設定は完了したので、<code class=\"language-text\">build</code>後に<code class=\"language-text\">デプロイ先のURL/sitemap.xml</code>に移動すれば確認する事ができる。</p>\n<p>なお、developmentモードでは上記は確認する事ができないので、プラグインのインストールとgatsby-config.jsの編集が終わった後に、<code class=\"language-text\">gatsby build &amp;&amp; serve</code>をする必要がある。</p>\n<br/>\n<h3>v4での注意点</h3>\n<p>現在公開されている<code class=\"language-text\">gatsby-plugin-sitemap</code>のバージョン(v4.0.0)では、<code class=\"language-text\">https://○○○.com/sitemap.xml</code>に移動してもサイトマップを確認する事ができない。</p>\n<p><a href=\"https://github.com/gatsbyjs/gatsby/issues/31095\">GitHub上のissue</a>によると、現在サイトマップは<code class=\"language-text\">https://○○○.com/sitemap/sitemap-0.xml</code>に設置されているので、最新版のプラグインをインストールする際は注意が必要である。</p>\n<br/>\n<h2>メタタグの設定</h2>\n<p>メタタグは<code class=\"language-text\">&lt;head&gt;</code>タグ内に設定されるタグで、各ページのタイトルや説明文を追加する。Gatsbyでメタタグを設定するには、<code class=\"language-text\">react-helmet</code>というプラグインをインストールする必要がある。</p>\n<br/>\n<h3>プラグインのインストール</h3>\n<p><code class=\"language-text\">gatsby-plugin-react-helmet</code>と<code class=\"language-text\">react-helmet</code>という2つのプラグインをインストールする</p>\n<br/>\n<div class=\"gatsby-code-title your-custom-class-name\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-plugin-react-helmet react-helmet</code></pre></div>\n<br/>\n<h3>gatsby-config.jsを編集</h3>\n<p>gatsby-config.jsに、以下を追加する。なお、○○○には任意の値を入れる。</p>\n<br/>\n<div class=\"gatsby-code-title your-custom-class-name\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">○○○</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">○○○</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    author<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">○○○</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    siteUrl<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://○○○.com</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-react-helmet</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3>SEOコンポーネントの作成</h3>\n<p>手順としては、まず初めに、<code class=\"language-text\">components</code>配下に、<code class=\"language-text\">seo.tsx</code>を作成する。</p>\n<p>そして、GraphQLからgatsby-config.jsのsiteMetadataを取得する。</p>\n<p>最後に、<code class=\"language-text\">&lt;Helmet&gt;</code>タグ内に取得したsiteMetadataの情報を入力する。</p>\n<p>例としては、以下のように書く。</p>\n<br/>\n<div class=\"gatsby-code-title your-custom-class-name\">seo.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">\"prop-types\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Helmet <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-helmet\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SEO</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">const</span> siteMetadata <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    query {\n        site {\n            siteMetadata {\n                title\n                description\n        }\n      }\n    }    \n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>siteMetadata\n\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>Helmet<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:title\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>siteMetadata<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:description\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>siteMetadata<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:type\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"website\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Helmet<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token constant\">SEO</span></code></pre></div>\n<br/>\n<p>また、metaタグには以下のようにtwitterカードなどを設定しておくと、ツイート時に自身で設定しておいた画像が添付される。</p>\n<div class=\"gatsby-code-title your-custom-class-name\">seo.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:card\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"summary\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:image\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"任意のURL\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<br/>\n<p><a\n          class=\"gatsby-resp-image-link\"\n          href=\"https://images.ctfassets.net/k8nc29mdlquq/2HH7XdqIm6RB1uTi9bFkOv/178f87e95c3cae2f05409b0f5a788876/IMG_6091.jpg\"\n          style=\"display: block\"\n          target=\"_blank\"\n          rel=\"noopener\"\n        >\n          <span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 48.148148148148145%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEA2ADYAAD/4gI0SUNDX1BST0ZJTEUAAQEAAAIkYXBwbAQAAABtbnRyUkdCIFhZWiAH4QAHAAcADQAWACBhY3NwQVBQTAAAAABBUFBMAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGzKGpWCJX8QTTiZE9XR6hWCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAGVjcHJ0AAABZAAAACN3dHB0AAABiAAAABRyWFlaAAABnAAAABRnWFlaAAABsAAAABRiWFlaAAABxAAAABRyVFJDAAAB2AAAACBjaGFkAAAB+AAAACxiVFJDAAAB2AAAACBnVFJDAAAB2AAAACBkZXNjAAAAAAAAAAtEaXNwbGF5IFAzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHRleHQAAAAAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMTcAAFhZWiAAAAAAAADzUQABAAAAARbMWFlaIAAAAAAAAIPfAAA9v////7tYWVogAAAAAAAASr8AALE3AAAKuVhZWiAAAAAAAAAoOAAAEQsAAMi5cGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltzZjMyAAAAAAABDEIAAAXe///zJgAAB5MAAP2Q///7ov///aMAAAPcAADAbv/bAEMAAwICAwICAwMDAwQDAwQFCAUFBAQFCgcHBggMCgwMCwoLCw0OEhANDhEOCwsQFhARExQVFRUMDxcYFhQYEhQVFP/bAEMBAwQEBQQFCQUFCRQNCw0UFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFP/AABEIABMAKAMBEQACEQEDEQH/xAAaAAACAgMAAAAAAAAAAAAAAAAEBQACAQcJ/8QAKRAAAgECBQMEAgMAAAAAAAAAAQIDBBEABRIhQQYiMRMUMmEVcVGBwf/EABgBAQEBAQEAAAAAAAAAAAAAAAABBAID/8QAIBEAAgICAgIDAAAAAAAAAAAAAAECEQMhBDESE1Fhkf/aAAwDAQACEQMRAD8A6T53XZkc5nWl/LQQwoiEU9JFJHKfkWVnNye4L4sNJ87WAAps3zepRkeLPkZ7Wl9jCmmwe+xc+e3jgfycAH5XUZmYZayonzbREjL7SajhDuQ57l03vsu2/hgdzgAtKivm9GHVmKOxUtIaeIAC4Bub7fEnbfu24sA2gpKiKWNpK6SZVQqUKIAxsvcbC99m8bd30MAaw6pq81qOo+oaifqKbp/JcskiiWQzLFELwo5ckjfue2+31jvkR5aWKHBUG5Jt3Fyd+TVUnpUrtb32aMPp8ZSzX+0gnIurM4zPpnLKyKtjb1aQSLLJNGvuGMjWazKSLqFI4s3jke/JxPFlcPjutpOtq/p6MilFq4vQ7op+o8yCIlSsdiUklimhfQCpIe2jc32te3OM1UdJjrRnDylATHH6gAl1oSFuLm2n9n++OIUaU8EsNzJUPPcADUoFvvYc/wCYAy1BTPK8jU8TSP8AJygu3G55xGr7HXReCnipYVihjWGJRZUjGlR+gMXslUXtgUlsAS2AP//Z'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"poteboy twitter icon\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/k8nc29mdlquq/2HH7XdqIm6RB1uTi9bFkOv/178f87e95c3cae2f05409b0f5a788876/IMG_6091.jpg\"\n        srcset=\"https://images.ctfassets.net/k8nc29mdlquq/2HH7XdqIm6RB1uTi9bFkOv/178f87e95c3cae2f05409b0f5a788876/IMG_6091.jpg?w=311 311w,\nhttps://images.ctfassets.net/k8nc29mdlquq/2HH7XdqIm6RB1uTi9bFkOv/178f87e95c3cae2f05409b0f5a788876/IMG_6091.jpg?w=621 621w,\nhttps://images.ctfassets.net/k8nc29mdlquq/2HH7XdqIm6RB1uTi9bFkOv/178f87e95c3cae2f05409b0f5a788876/IMG_6091.jpg?w=1242 1242w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span>\n        </a></p>\n<br/>\n<h3>各ページ個別のメタデータを設定する</h3>\n<p>上記の作業でメタデータの設定は出来たが、このままでは各ページ毎に固有のメタタグを設定する事はできていない。</p>\n<p>よって、作成したSEOコンポーネントでpropsを受け取るように書き換える必要がある。</p>\n<p>また、propsから値を受け取らなかった場合は先ほど同様にgatsby-config.jsにデフォルトの情報を使うようにする。</p>\n<br/>\n<div class=\"gatsby-code-title your-custom-class-name\">seo.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SEO</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> seoProps<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token operator\">**</span><span class=\"token operator\">*</span> 略 <span class=\"token operator\">**</span><span class=\"token operator\">*</span>\n\n    <span class=\"token keyword\">const</span> seo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        title<span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>title <span class=\"token operator\">||</span> siteMetadata<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n        description<span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>description <span class=\"token operator\">||</span> siteMetadata<span class=\"token punctuation\">.</span>description\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>Helmet<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:title\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>seo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:description\"</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>seo<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:type\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"website\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:card\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"summary\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n　　　　　　　<span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:image\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"任意のURL\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Helmet<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">seoProps</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<br/>\n<p>後は、各ページコンポーネントに作成したSEOを埋め込み、propsを渡せば良い。</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">SEO</span>\n  title<span class=\"token operator\">=</span><span class=\"token string\">\"○○○\"</span>\n  description<span class=\"token operator\">=</span><span class=\"token string\">\"○○○\"</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<br/>\n<h2>参考</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/add-page-metadata/\">Adding Page Metadata</a></li>\n<li><a href=\"https://qiita.com/atomyah/items/2624ea4f9394e4a992b8#%E5%90%84%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%ABseo-%E3%82%92%E5%9F%8B%E3%82%81%E8%BE%BC%E3%82%80\">Gatsby: SEO対策（Twitterカードなどmetaタグ設置）</a></li>\n</ul>"}}},"contentfulPoem":null},"pageContext":{"slug":"gatsby-seo","prev":{"slug":"level_order_binary_tree_traversal","title":"二分木の幅優先探索をLevel Order Traversalで実現する","publishedDate":"2021-05-05T02:13+09:00"},"next":{"slug":"basic-set-operations-in-python","title":"Pythonのsetで理解する集合の基礎","publishedDate":"2021-05-02T02:55+09:00"}}},"staticQueryHashes":["1271460761","2463962953","3000541721","3159585216"]}